"use strict";(self.webpackChunkautomata_neural_nexus_portal=self.webpackChunkautomata_neural_nexus_portal||[]).push([[397],{8397:(e,s,a)=>{a.r(s),a.d(s,{default:()=>v});var i=a(4848),c=a(6540),l=a(6787),t=a(4934),r=a(3540),n=a(3160),d=a(4731),o=a(68),m=a(3661);const h=(0,c.lazy)(()=>Promise.all([a.e(96),a.e(297)]).then(a.bind(a,297))),x=(0,c.lazy)(()=>Promise.all([a.e(96),a.e(304)]).then(a.bind(a,3304)));o.t1.register(o.PP,o.kc,o.FN,o.No,o.hE,o.m_,o.s$,o.dN);const v=({systemInfo:e})=>{const[s,a]=(0,c.useState)(null),[o,v]=(0,c.useState)({nodeRed:"checking",neuralBMS:"checking",cloudflare:"checking"}),[j,N]=(0,c.useState)({fan:!1,dxStage1:!1,dxStage2:!1,heat:!1,modGas:0}),[u,p]=(0,c.useState)(Array(20).fill(0)),[f,b]=(0,c.useState)(Array(20).fill(0)),[g,w]=(0,c.useState)(Array(20).fill("")),[k,y]=(0,c.useState)(!1),[S,C]=(0,c.useState)("192.168.1.100"),[_,P]=(0,c.useState)(!1),[U,A]=(0,c.useState)(""),[I,F]=(0,c.useState)(""),[z,M]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{try{const e=await(0,m.U)("/api/network-info");if(e.ok){const s=await e.json();s.ip&&C(s.ip)}}catch(s){console.error("Failed to fetch IP:",s),e&&e.ip_address&&C(e.ip_address)}})()},[e]),(0,c.useEffect)(()=>{const e=async()=>{try{const e=await(0,m.U)("/api/weather");if(e.ok){const s=await e.json();a(s)}}catch(e){console.error("Failed to fetch weather:",e)}};e();const s=setInterval(e,6e5);return()=>clearInterval(s)},[]),(0,c.useEffect)(()=>{const s=async()=>{try{const e=await fetch("/node-red/");v(s=>({...s,nodeRed:e.ok?"online":"offline"}))}catch{v(e=>({...e,nodeRed:"offline"}))}v(s=>({...s,neuralBMS:e?"online":"offline",cloudflare:e?"online":"offline"}))};s();const a=setInterval(s,3e4);return()=>clearInterval(a)},[e]),(0,c.useEffect)(()=>{const e=async()=>{try{const e=await(0,m.U)("/api/boards/current-readings");if(e.ok){const s=await e.json();N({fan:s.outputs?.triacs?.triac1||!1,dxStage1:s.outputs?.triacs?.triac3||!1,dxStage2:s.outputs?.triacs?.triac4||!1,heat:s.outputs?.triacs?.triac2||!1,modGas:s.outputs?.analog?.ao2||0})}}catch(e){console.error("Failed to check equipment status:",e)}};e();const s=setInterval(e,5e3);return()=>clearInterval(s)},[]),(0,c.useEffect)(()=>{if(!e)return;const s=(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",timeZone:"America/New_York"});p(s=>[...s.slice(1),parseFloat(e.cpu_usage||"0")]),b(s=>[...s.slice(1),e.mem_percent||0]),w(e=>[...e.slice(1),s])},[e]);const R={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#111827",bodyColor:"#374151",borderColor:"#e5e7eb",borderWidth:1}},scales:{y:{beginAtZero:!0,max:100,ticks:{color:"#64748b",callback:function(e){return e+"%"}},grid:{color:"rgba(148, 163, 184, 0.1)",drawBorder:!1}},x:{ticks:{color:"#64748b",maxRotation:0,autoSkip:!0,maxTicksLimit:6},grid:{display:!1}}}},$={labels:g,datasets:[{label:"CPU Usage",data:u,borderColor:"#14b8a6",backgroundColor:"rgba(20, 184, 166, 0.1)",borderWidth:2,tension:.4,fill:!0,pointRadius:0,pointHoverRadius:4,pointBackgroundColor:"#14b8a6"}]},O={labels:g,datasets:[{label:"Memory Usage",data:f,borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:2,tension:.4,fill:!0,pointRadius:0,pointHoverRadius:4,pointBackgroundColor:"#10b981"}]};return e?(0,i.jsxs)("div",{className:"dashboard-container",children:[(0,i.jsxs)("div",{className:"status-buttons-row",children:[(0,i.jsxs)("button",{className:`status-button nodered ${o.nodeRed}`,children:[(0,i.jsx)("div",{className:"status-icon",children:(0,i.jsx)("i",{className:"fas fa-project-diagram"})}),(0,i.jsx)("div",{className:"status-text",children:"Node-RED"})]}),(0,i.jsxs)("button",{className:`status-button neuralbms ${o.neuralBMS}`,children:[(0,i.jsx)("div",{className:"status-icon",children:(0,i.jsx)("i",{className:"fas fa-brain"})}),(0,i.jsx)("div",{className:"status-text",children:"NeuralBMS"})]}),(0,i.jsxs)("button",{className:`status-button cloudflare ${o.cloudflare}`,children:[(0,i.jsx)("div",{className:"status-icon",children:(0,i.jsx)("i",{className:"fas fa-cloud"})}),(0,i.jsx)("div",{className:"status-text",children:"Cloudflare"})]})]}),(0,i.jsxs)("div",{className:"valve-status-row",children:[(0,i.jsxs)("div",{className:"valve-indicator "+(j.fan?"open":"closed"),children:[(0,i.jsx)("div",{className:"valve-icon",children:(0,i.jsx)(l.A,{size:14})}),(0,i.jsxs)("div",{className:"valve-info",children:[(0,i.jsx)("div",{className:"valve-text",children:"Fan"}),(0,i.jsx)("div",{className:"valve-state",children:j.fan?"On":"Off"})]})]}),(0,i.jsxs)("div",{className:"valve-indicator "+(j.dxStage1?"open":"closed"),children:[(0,i.jsx)("div",{className:"valve-icon",children:(0,i.jsx)(l.A,{size:14})}),(0,i.jsxs)("div",{className:"valve-info",children:[(0,i.jsx)("div",{className:"valve-text",children:"DX Stage 1"}),(0,i.jsx)("div",{className:"valve-state",children:j.dxStage1?"On":"Off"})]})]}),(0,i.jsxs)("div",{className:"valve-indicator "+(j.dxStage2?"open":"closed"),children:[(0,i.jsx)("div",{className:"valve-icon",children:(0,i.jsx)(l.A,{size:14})}),(0,i.jsxs)("div",{className:"valve-info",children:[(0,i.jsx)("div",{className:"valve-text",children:"DX Stage 2"}),(0,i.jsx)("div",{className:"valve-state",children:j.dxStage2?"On":"Off"})]})]}),(0,i.jsxs)("div",{className:"valve-indicator "+(j.heat?"open":"closed"),children:[(0,i.jsx)("div",{className:"valve-icon",children:(0,i.jsx)(l.A,{size:14})}),(0,i.jsxs)("div",{className:"valve-info",children:[(0,i.jsx)("div",{className:"valve-text",children:"Heat"}),(0,i.jsx)("div",{className:"valve-state",children:j.heat?"On":"Off"})]})]}),(0,i.jsxs)("div",{className:"valve-indicator "+(j.modGas>0?"open":"closed"),children:[(0,i.jsx)("div",{className:"valve-icon",children:(0,i.jsx)(l.A,{size:14})}),(0,i.jsxs)("div",{className:"valve-info",children:[(0,i.jsx)("div",{className:"valve-text",children:"ModGas"}),(0,i.jsxs)("div",{className:"valve-state",children:[j.modGas.toFixed(1),"V"]})]})]})]}),(0,i.jsxs)("div",{className:"weather-row",children:[s&&(0,i.jsxs)("div",{className:"weather-card",children:[(0,i.jsxs)("div",{className:"weather-header",children:[(0,i.jsx)("img",{src:`https://openweathermap.org/img/wn/${s.icon}@4x.png`,alt:s.condition,className:"weather-main-icon"}),(0,i.jsxs)("div",{className:"weather-main-info",children:[(0,i.jsxs)("div",{className:"weather-temperature",children:[s.temperature,"°F"]}),(0,i.jsx)("div",{className:"weather-description",children:s.condition}),(0,i.jsxs)("div",{className:"weather-feels",children:["Feels like ",s.feelsLike,"°F"]})]})]}),(0,i.jsxs)("div",{className:"weather-stats",children:[(0,i.jsxs)("div",{className:"weather-stat",children:[(0,i.jsx)("i",{className:"fas fa-wind"}),(0,i.jsxs)("span",{children:[s.windSpeed," mph"]})]}),(0,i.jsxs)("div",{className:"weather-stat",children:[(0,i.jsx)("i",{className:"fas fa-tint"}),(0,i.jsxs)("span",{children:[s.humidity,"%"]})]}),(0,i.jsxs)("div",{className:"weather-stat",children:[(0,i.jsx)("i",{className:"fas fa-eye"}),(0,i.jsxs)("span",{children:[s.visibility," mi"]})]})]}),(0,i.jsxs)("div",{className:"weather-footer",children:[(0,i.jsx)("i",{className:"fas fa-map-marker-alt"}),(0,i.jsx)("span",{children:s.location}),(0,i.jsx)("button",{className:"weather-edit-btn",onClick:()=>{P(!0),A(""),F("")},title:"Change location",children:(0,i.jsx)(t.A,{size:14})})]})]}),(0,i.jsx)(c.Suspense,{fallback:(0,i.jsx)("div",{className:"trend-graph-card",children:(0,i.jsx)("div",{className:"loading-placeholder",children:"Loading graph..."})}),children:(0,i.jsx)(x,{})}),(0,i.jsx)(c.Suspense,{fallback:(0,i.jsx)("div",{className:"widget-card",children:(0,i.jsx)("div",{className:"loading-placeholder",children:"Loading readings..."})}),children:(0,i.jsx)(h,{})})]}),(0,i.jsxs)("div",{className:"metrics-row",children:[(0,i.jsxs)("div",{className:"metric-box",children:[(0,i.jsx)("div",{className:"metric-icon-wrapper cpu",children:(0,i.jsx)("i",{className:"fas fa-thermometer-half"})}),(0,i.jsxs)("div",{className:"metric-content",children:[(0,i.jsx)("div",{className:"metric-label",children:"CPU Temperature"}),(0,i.jsx)("div",{className:"metric-value",children:e.cpu_temp||"N/A"}),(0,i.jsx)("div",{className:"metric-status",children:"Normal"})]})]}),(0,i.jsxs)("div",{className:"metric-box",children:[(0,i.jsx)("div",{className:"metric-icon-wrapper cpu",children:(0,i.jsx)("i",{className:"fas fa-microchip"})}),(0,i.jsxs)("div",{className:"metric-content",children:[(0,i.jsx)("div",{className:"metric-label",children:"CPU Usage"}),(0,i.jsxs)("div",{className:"metric-value",children:[e.cpu_usage||"0","%"]}),(0,i.jsx)("div",{className:"metric-bar",children:(0,i.jsx)("div",{className:"metric-bar-fill cpu",style:{width:`${e.cpu_usage||0}%`}})})]})]}),(0,i.jsxs)("div",{className:"metric-box",children:[(0,i.jsx)("div",{className:"metric-icon-wrapper memory",children:(0,i.jsx)("i",{className:"fas fa-memory"})}),(0,i.jsxs)("div",{className:"metric-content",children:[(0,i.jsx)("div",{className:"metric-label",children:"Memory Usage"}),(0,i.jsxs)("div",{className:"metric-value",children:[e.mem_percent||0,"%"]}),(0,i.jsx)("div",{className:"metric-bar",children:(0,i.jsx)("div",{className:"metric-bar-fill memory",style:{width:`${e.mem_percent||0}%`}})})]})]}),(0,i.jsxs)("div",{className:"metric-box",children:[(0,i.jsx)("div",{className:"metric-icon-wrapper disk",children:(0,i.jsx)("i",{className:"fas fa-hdd"})}),(0,i.jsxs)("div",{className:"metric-content",children:[(0,i.jsx)("div",{className:"metric-label",children:"Disk Usage"}),(0,i.jsxs)("div",{className:"metric-value",children:[e.disk_percent||0,"%"]}),(0,i.jsxs)("div",{className:"metric-subtext",children:[e.disk_used||"N/A"," / ",e.disk_total||"N/A"]})]})]}),(0,i.jsxs)("div",{className:"metric-box",children:[(0,i.jsx)("div",{className:"metric-icon-wrapper uptime",children:(0,i.jsx)("i",{className:"fas fa-clock"})}),(0,i.jsxs)("div",{className:"metric-content",children:[(0,i.jsx)("div",{className:"metric-label",children:"Uptime"}),(0,i.jsx)("div",{className:"metric-value",children:(E=e.uptime||0,`${Math.floor(E/86400)}d ${Math.floor(E%86400/3600)}h ${Math.floor(E%3600/60)}m`)}),(0,i.jsx)("div",{className:"metric-status",children:"Stable"})]})]}),(0,i.jsxs)("div",{className:"metric-box network-box",children:[(0,i.jsx)("div",{className:"metric-icon-wrapper network",children:(0,i.jsx)("i",{className:"fas fa-wifi"})}),(0,i.jsxs)("div",{className:"metric-content",children:[(0,i.jsxs)("div",{className:"metric-label",children:["Network",(0,i.jsx)("button",{className:"ip-toggle-btn",onClick:()=>y(!k),title:k?"Hide IP":"Show IP",children:k?(0,i.jsx)(r.A,{size:14}):(0,i.jsx)(n.A,{size:14})})]}),(0,i.jsx)("div",{className:"metric-value",children:"Connected"}),(0,i.jsx)("div",{className:"metric-status",children:k?S:"Strong Signal"})]})]})]}),(0,i.jsxs)("div",{className:"charts-row",children:[(0,i.jsxs)("div",{className:"chart-box",children:[(0,i.jsxs)("div",{className:"chart-header",children:[(0,i.jsx)("h3",{children:"CPU Usage History"}),(0,i.jsxs)("span",{className:"chart-current",children:[e.cpu_usage||0,"%"]})]}),(0,i.jsx)("div",{className:"chart-content",children:(0,i.jsx)(d.N1,{data:$,options:R})})]}),(0,i.jsxs)("div",{className:"chart-box",children:[(0,i.jsxs)("div",{className:"chart-header",children:[(0,i.jsx)("h3",{children:"Memory Usage History"}),(0,i.jsxs)("span",{className:"chart-current",children:[e.mem_percent||0,"%"]})]}),(0,i.jsx)("div",{className:"chart-content",children:(0,i.jsx)(d.N1,{data:O,options:R})})]})]}),_&&(0,i.jsx)("div",{className:"modal-overlay",onClick:()=>P(!1),children:(0,i.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h3",{children:"Change Weather Location"}),(0,i.jsx)("button",{className:"modal-close-btn",onClick:()=>P(!1),children:"×"})]}),(0,i.jsxs)("div",{className:"modal-body",children:[(0,i.jsx)("label",{htmlFor:"zipCode",children:"Enter ZIP Code:"}),(0,i.jsx)("input",{id:"zipCode",type:"text",value:U,onChange:e=>{A(e.target.value),F("")},placeholder:"e.g., 60601",maxLength:5,className:I?"input-error":""}),I&&(0,i.jsx)("div",{className:"error-message",children:I})]}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{className:"btn-secondary",onClick:()=>P(!1),disabled:z,children:"Cancel"}),(0,i.jsx)("button",{className:"btn-primary",onClick:async()=>{if(U&&5===U.length&&/^\d{5}$/.test(U)){M(!0),F("");try{const e=await(0,m.U)("/api/settings/weather-location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({zipCode:U})});if(e.ok){P(!1),A("");const e=await(0,m.U)("/api/weather");if(e.ok){const s=await e.json();a(s)}}else{const s=await e.json();F(s.message||"Failed to save ZIP code")}}catch(e){console.error("Failed to save ZIP code:",e),F("Failed to save ZIP code")}finally{M(!1)}}else F("Please enter a valid 5-digit ZIP code")},disabled:z,children:z?"Saving...":"Save"})]})]})})]}):(0,i.jsxs)("div",{className:"dashboard-loading",children:[(0,i.jsx)("div",{className:"spinner"}),(0,i.jsx)("div",{children:"Loading system information..."})]});var E}}}]);
//# sourceMappingURL=397.0cdb99062fa94a403593.chunk.js.map