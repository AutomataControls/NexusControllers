"use strict";(self.webpackChunkautomata_neural_nexus_portal=self.webpackChunkautomata_neural_nexus_portal||[]).push([[408],{2408:(e,a,t)=>{t.r(a),t.d(a,{default:()=>i});var n=t(4848),o=t(6540),d=t(1083);const i=()=>{const[e,a]=(0,o.useState)(!0),t=(0,o.useRef)(null);return(0,o.useEffect)(()=>{const e=async e=>{if(e.data&&e.data.type){const a=sessionStorage.getItem("token");if(!a)return;try{"NODE_RED_DEPLOY"===e.data.type?(await d.A.post("/api/audit/nodered-deploy",{deployType:e.data.data.deployType,flowCount:e.data.data.flowCount,nodeCount:e.data.data.nodeCount,timestamp:e.data.data.timestamp},{headers:{Authorization:`Bearer ${a}`}}),console.log("Node-RED deploy audit logged:",e.data.data)):"NODE_RED_SAVE"===e.data.type?await d.A.post("/api/audit/ui-change",{actionType:"NODE_RED_SAVE",description:"Node-RED flows saved",component:"Node-RED",details:e.data.data},{headers:{Authorization:`Bearer ${a}`}}):"NODE_RED_MENU_ACTION"===e.data.type&&await d.A.post("/api/audit/ui-change",{actionType:"NODE_RED_MENU",description:`Node-RED menu action: ${e.data.data.action}`,component:"Node-RED",details:e.data.data},{headers:{Authorization:`Bearer ${a}`}})}catch(e){console.error("Failed to log Node-RED audit:",e)}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]),(0,n.jsxs)("div",{className:"iframe-container",children:[e&&(0,n.jsx)("div",{className:"iframe-loading",children:(0,n.jsxs)("div",{className:"spinner-container",children:[(0,n.jsx)("div",{className:"spinner"}),(0,n.jsx)("p",{className:"loading-text",children:"Loading Node-RED..."}),(0,n.jsx)("p",{className:"loading-subtext",children:"Flow-based programming interface"})]})}),(0,n.jsx)("iframe",{ref:t,src:"/node-red/",className:"full-iframe",onLoad:()=>{a(!1);try{if(t.current&&t.current.contentWindow){const e=t.current.contentDocument?.createElement("script");e&&(e.src="/node-red-audit.js",t.current.contentDocument?.head.appendChild(e))}}catch(e){console.log("Could not inject audit script directly, Node-RED audit may be limited")}},style:{display:e?"none":"block"},title:"Node-RED"})]})}}}]);
//# sourceMappingURL=408.e5461a3488f3f59b7d19.chunk.js.map