"use strict";(self.webpackChunkautomata_neural_nexus_portal=self.webpackChunkautomata_neural_nexus_portal||[]).push([[123],{991:(a,e,s)=>{s.d(e,{A:()=>g});var t=s(4848),n=s(923),o=s(5072),d=s.n(o),i=s(7825),r=s.n(i),c=s(7659),l=s.n(c),u=s(5056),m=s.n(u),h=s(540),p=s.n(h),A=s(1113),x=s.n(A),b=s(5126),v={};v.styleTagTransform=x(),v.setAttributes=m(),v.insert=l().bind(null,"head"),v.domAPI=r(),v.insertStyleElement=p(),d()(b.A,v),b.A&&b.A.locals&&b.A.locals;const g=({checked:a,onCheckedChange:e,disabled:s=!1,className:o=""})=>(0,t.jsx)(n.bL,{className:`switch-root ${o}`,checked:a,onCheckedChange:e,disabled:s,children:(0,t.jsx)(n.zi,{className:"switch-thumb"})})},5126:(a,e,s)=>{s.d(e,{A:()=>i});var t=s(1354),n=s.n(t),o=s(6314),d=s.n(o)()(n());d.push([a.id,"/* Sleek Switch Component Styles */\n.switch-root {\n  width: 36px;\n  height: 18px;\n  background-color: #d1d5db;\n  border-radius: 9999px;\n  position: relative;\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  border: none;\n  padding: 0;\n}\n\n.switch-root[data-state='checked'] {\n  background-color: #14b8a6;\n}\n\n.switch-root[data-disabled] {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.switch-thumb {\n  display: block;\n  width: 14px;\n  height: 14px;\n  background-color: white;\n  border-radius: 9999px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n  transition: transform 0.2s ease;\n  transform: translateX(2px);\n  will-change: transform;\n}\n\n.switch-thumb[data-state='checked'] {\n  transform: translateX(20px);\n}","",{version:3,sources:["webpack://./src/styles/switch.css"],names:[],mappings:"AAAA,kCAAkC;AAClC;EACE,WAAW;EACX,YAAY;EACZ,yBAAyB;EACzB,qBAAqB;EACrB,kBAAkB;EAClB,8CAA8C;EAC9C,eAAe;EACf,sCAAsC;EACtC,YAAY;EACZ,UAAU;AACZ;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,YAAY;EACZ,mBAAmB;AACrB;;AAEA;EACE,cAAc;EACd,WAAW;EACX,YAAY;EACZ,uBAAuB;EACvB,qBAAqB;EACrB,wCAAwC;EACxC,+BAA+B;EAC/B,0BAA0B;EAC1B,sBAAsB;AACxB;;AAEA;EACE,2BAA2B;AAC7B",sourcesContent:["/* Sleek Switch Component Styles */\n.switch-root {\n  width: 36px;\n  height: 18px;\n  background-color: #d1d5db;\n  border-radius: 9999px;\n  position: relative;\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  border: none;\n  padding: 0;\n}\n\n.switch-root[data-state='checked'] {\n  background-color: #14b8a6;\n}\n\n.switch-root[data-disabled] {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.switch-thumb {\n  display: block;\n  width: 14px;\n  height: 14px;\n  background-color: white;\n  border-radius: 9999px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n  transition: transform 0.2s ease;\n  transform: translateX(2px);\n  will-change: transform;\n}\n\n.switch-thumb[data-state='checked'] {\n  transform: translateX(20px);\n}"],sourceRoot:""}]);const i=d},6123:(a,e,s)=>{s.r(e),s.d(e,{default:()=>r});var t=s(4848),n=s(6540),o=s(7946),d=s(991),i=s(3661);const r=()=>{const[a,e]=(0,n.useState)("megabas"),[s,r]=(0,n.useState)({megabas:!1,relay16:!1,relay8:!1,input16:!1}),[c,l]=(0,n.useState)(!0),[u,m]=(0,n.useState)(null),[h,p]=(0,n.useState)([]),[A,x]=(0,n.useState)([{id:1,state:!1,mode:"auto"},{id:2,state:!1,mode:"auto"},{id:3,state:!1,mode:"auto"},{id:4,state:!1,mode:"auto"}]),[b,v]=(0,n.useState)([{id:1,value:0,mode:"auto"},{id:2,value:0,mode:"auto"},{id:3,value:0,mode:"auto"},{id:4,value:0,mode:"auto"}]),[g,y]=(0,n.useState)([]),[j,C]=(0,n.useState)([]),[N,w]=(0,n.useState)([]),[k,B]=(0,n.useState)([]);(0,n.useEffect)(()=>{f();const a=setInterval(S,5e3);return()=>clearInterval(a)},[]);const E=(a,e)=>{if(!e||"raw"===e)return{converted:a.toFixed(0),unit:""};switch(e){case"temperature":if(a<2e3){const e=(Math.sqrt(.00644*a-1.6597)-1.961)/.00322;return{converted:Math.max(-40,Math.min(250,e)).toFixed(1),unit:"°F"}}return{converted:(9*(1/(Math.log(a/1e4)/3950+1/298.15)-273.15)/5+32).toFixed(1),unit:"°F"};case"humidity":return{converted:(a/1e4*100).toFixed(1),unit:"%"};case"pressure":return{converted:(a/1e3*15).toFixed(1),unit:"PSI"};case"voltage":return{converted:(a/1e3).toFixed(2),unit:"V"};case"resistance":return{converted:a.toFixed(0),unit:"Ω"};default:return{converted:a.toFixed(0),unit:""}}},f=async()=>{try{const a=await(0,i.U)("/api/boards/detect");if(a.ok){const s=await a.json();r(s),s.megabas?e("megabas"):s.input16?e("input16"):s.relay16?e("relay16"):s.relay8?e("relay8"):e("megabas")}const s=await(0,i.U)("/api/logic/boards");if(s.ok){const a=await s.json();p(a)}l(!1)}catch(a){m("Failed to detect boards"),l(!1)}},S=async()=>{try{const a=await(0,i.U)("/api/boards/states");if(a.ok){const e=await a.json();e.megabas&&(x(e.megabas.triacs||A),v(e.megabas.analogOutputs||b),y(e.megabas.inputs||[])),e.input16&&C(e.input16.inputs||[]),e.relay16&&w(e.relay16.relays||[]),e.relay8&&B(e.relay8.relays||[])}}catch(a){console.error("Failed to fetch board states:",a)}},F=async(a,e,s)=>{try{(await(0,i.U)("/api/boards/relay",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({board:a,relayId:e,state:s})})).ok&&("megabas"===a?x(a=>a.map(a=>a.id===e?{...a,state:s}:a)):"relay16"===a?w(a=>a.map(a=>a.id===e?{...a,state:s}:a)):"relay8"===a&&B(a=>a.map(a=>a.id===e?{...a,state:s}:a)))}catch(a){console.error("Failed to toggle relay:",a)}},T=async(a,e,s)=>{try{(await(0,i.U)("/api/boards/mode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({board:a,outputId:e,mode:s})})).ok&&("megabas-triac"===a?x(a=>a.map(a=>a.id===e?{...a,mode:s}:a)):"megabas-analog"===a?v(a=>a.map(a=>a.id===e?{...a,mode:s}:a)):"relay16"===a?w(a=>a.map(a=>a.id===e?{...a,mode:s}:a)):"relay8"===a&&B(a=>a.map(a=>a.id===e?{...a,mode:s}:a)))}catch(a){console.error("Failed to toggle mode:",a)}};return c?(0,t.jsx)("div",{className:"controls-loading",children:"Detecting boards..."}):u?(0,t.jsxs)("div",{className:"controls-error",children:[(0,t.jsx)(o.A,{})," ",u]}):(0,t.jsxs)("div",{className:"controls-container",children:[(0,t.jsxs)("div",{className:"controls-header",children:[(0,t.jsx)("h1",{children:"Manual I/O Controls"}),(0,t.jsxs)("div",{className:"board-status",children:[s.megabas&&(0,t.jsx)("span",{className:"board-chip",children:"MegaBAS"}),s.input16&&(0,t.jsx)("span",{className:"board-chip",children:"16-Input"}),s.relay16&&(0,t.jsx)("span",{className:"board-chip",children:"16-Relay"}),s.relay8&&(0,t.jsx)("span",{className:"board-chip",children:"8-Relay"})]})]}),(0,t.jsxs)("div",{className:"controls-tabs",children:[s.megabas&&(0,t.jsx)("button",{className:"tab-button "+("megabas"===a?"active":""),onClick:()=>e("megabas"),children:"MegaBAS"}),s.input16&&(0,t.jsx)("button",{className:"tab-button "+("input16"===a?"active":""),onClick:()=>e("input16"),children:"16 Inputs"}),s.relay16&&(0,t.jsx)("button",{className:"tab-button "+("relay16"===a?"active":""),onClick:()=>e("relay16"),children:"16 Relays"}),s.relay8&&(0,t.jsx)("button",{className:"tab-button "+("relay8"===a?"active":""),onClick:()=>e("relay8"),children:"8 Relays"})]}),(0,t.jsxs)("div",{className:"controls-content",children:["megabas"===a&&s.megabas&&(()=>{const a=h.find(a=>"megabas"===a.boardType&&a.enabled);return(0,t.jsxs)("div",{className:"controls-tab-content",children:[(0,t.jsxs)("div",{className:"controls-section",children:[(0,t.jsx)("h3",{children:"Triac Outputs"}),(0,t.jsx)("div",{className:"outputs-grid",children:A.map(e=>{const s=a?.outputs?.[`triac${e.id}`],n=s?.name||`Triac ${e.id}`;return(0,t.jsxs)("div",{className:"output-card",children:[(0,t.jsxs)("div",{className:"output-header",children:[(0,t.jsx)("span",{children:n}),(0,t.jsx)("button",{className:`mode-toggle ${e.mode}`,onClick:()=>T("megabas-triac",e.id,"auto"===e.mode?"manual":"auto"),children:"auto"===e.mode?"AUTO":"MANUAL"})]}),(0,t.jsx)(d.A,{checked:e.state,onCheckedChange:a=>"manual"===e.mode&&F("megabas",e.id,a),disabled:"auto"===e.mode})]},e.id)})})]}),(0,t.jsxs)("div",{className:"controls-section",children:[(0,t.jsx)("h3",{children:"Analog Outputs (0-10V)"}),(0,t.jsx)("div",{className:"outputs-grid",children:b.map(e=>{const s=a?.outputs?.[`ao${e.id}`],n=s?.name||`AO ${e.id}`;return(0,t.jsxs)("div",{className:"output-card",children:[(0,t.jsxs)("div",{className:"output-header",children:[(0,t.jsx)("span",{children:n}),(0,t.jsx)("button",{className:`mode-toggle ${e.mode}`,onClick:()=>T("megabas-analog",e.id,"auto"===e.mode?"manual":"auto"),children:"auto"===e.mode?"AUTO":"MANUAL"})]}),(0,t.jsx)("input",{type:"range",min:"0",max:"10",step:"0.1",value:e.value,onChange:a=>"manual"===e.mode&&(async(a,e)=>{try{(await(0,i.U)("/api/boards/analog",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({board:"megabas",outputId:a,value:e})})).ok&&v(s=>s.map(s=>s.id===a?{...s,value:e}:s))}catch(a){console.error("Failed to update analog output:",a)}})(e.id,parseFloat(a.target.value)),disabled:"auto"===e.mode,className:e.mode}),(0,t.jsxs)("span",{className:"output-value",children:[e.value.toFixed(1),"V"]})]},e.id)})})]}),(0,t.jsxs)("div",{className:"controls-section",children:[(0,t.jsx)("h3",{children:"Universal Inputs"}),(0,t.jsx)("div",{className:"inputs-grid",children:g.map(e=>{const s=a?.inputs?.[e.id],n=s?.conversionType||"raw",{converted:o,unit:d}=E(e.value,n);return(0,t.jsxs)("div",{className:"input-card",children:[(0,t.jsxs)("div",{className:"input-header",children:[(0,t.jsx)("span",{children:s?.name||e.label||`Input ${e.id}`}),(0,t.jsx)("span",{className:"input-type",children:n})]}),(0,t.jsxs)("div",{className:"input-values",children:[(0,t.jsxs)("div",{className:"input-value-converted",children:[o,d]}),(0,t.jsxs)("div",{className:"input-value-raw",children:[e.value.toFixed(0)," raw"]})]})]},e.id)})})]})]})})(),"input16"===a&&s.input16&&(0,t.jsx)("div",{className:"controls-tab-content",children:(0,t.jsxs)("div",{className:"controls-section",children:[(0,t.jsx)("h3",{children:"16 Universal Inputs"}),(0,t.jsx)("div",{className:"inputs-grid large",children:j.map(a=>{const e=h.find(a=>"16univin"===a.boardType&&a.enabled),s=e?.inputs?.[a.id],n=s?.conversionType||"raw",{converted:o,unit:d}=E(a.value,n);return(0,t.jsxs)("div",{className:"input-card",children:[(0,t.jsxs)("div",{className:"input-header",children:[(0,t.jsx)("span",{children:s?.name||a.label||`Input ${a.id}`}),(0,t.jsx)("span",{className:"input-type",children:n})]}),(0,t.jsxs)("div",{className:"input-values",children:[(0,t.jsxs)("div",{className:"input-value-converted",children:[o,d]}),(0,t.jsxs)("div",{className:"input-value-raw",children:[a.value.toFixed(0)," raw"]})]})]},a.id)})})]})}),"relay16"===a&&s.relay16&&(0,t.jsx)("div",{className:"controls-tab-content",children:(0,t.jsxs)("div",{className:"controls-section",children:[(0,t.jsx)("h3",{children:"16 Relay Outputs"}),(0,t.jsx)("div",{className:"outputs-grid large",children:N.map(a=>{const e=h.find(a=>"16relay"===a.boardType&&a.enabled),s=e?.outputs?.[a.id],n=s?.name||`Relay ${a.id}`;return(0,t.jsxs)("div",{className:"output-card",children:[(0,t.jsxs)("div",{className:"output-header",children:[(0,t.jsx)("span",{children:n}),(0,t.jsx)("button",{className:`mode-toggle ${a.mode}`,onClick:()=>T("relay16",a.id,"auto"===a.mode?"manual":"auto"),children:"auto"===a.mode?"AUTO":"MANUAL"})]}),(0,t.jsx)(d.A,{checked:a.state,onCheckedChange:e=>"manual"===a.mode&&F("relay16",a.id,e),disabled:"auto"===a.mode})]},a.id)})})]})}),"relay8"===a&&s.relay8&&(0,t.jsx)("div",{className:"controls-tab-content",children:(0,t.jsxs)("div",{className:"controls-section",children:[(0,t.jsx)("h3",{children:"8 Relay Outputs"}),(0,t.jsx)("div",{className:"outputs-grid",children:k.map(a=>(0,t.jsxs)("div",{className:"output-card",children:[(0,t.jsxs)("div",{className:"output-header",children:[(0,t.jsxs)("span",{children:["Relay ",a.id]}),(0,t.jsx)("button",{className:`mode-toggle ${a.mode}`,onClick:()=>T("relay8",a.id,"auto"===a.mode?"manual":"auto"),children:"auto"===a.mode?"AUTO":"MANUAL"})]}),(0,t.jsx)(d.A,{checked:a.state,onCheckedChange:e=>"manual"===a.mode&&F("relay8",a.id,e),disabled:"auto"===a.mode})]},a.id))})]})})]})]})}}}]);
//# sourceMappingURL=123.c5cdc8ccae868592d967.chunk.js.map