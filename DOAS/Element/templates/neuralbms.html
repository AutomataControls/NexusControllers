{% extends "base.html" %}

{% block title %}Neural BMS - Automata Remote Access{% endblock %}

{% block styles %}
<style>
    .iframe-container {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        overflow: hidden;
    }
    
    iframe {
        width: 100%;
        height: 100%;
        border: none;
    }
    
    .loading-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(255, 255, 255, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
    }
    
    .loading-content {
        text-align: center;
    }
    
    .spinner {
        border: 3px solid #f3f3f3;
        border-top: 3px solid #3b82f6;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto 20px;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
</style>
{% endblock %}

{% block content %}
<div class="iframe-container">
    <div id="loading" class="loading-overlay">
        <div class="loading-content">
            <div class="spinner"></div>
            <p>Connecting to Neural BMS...</p>
        </div>
    </div>
    <iframe id="neuralbms-frame"
            src="{{ neural_bms_url }}" 
            title="Neural BMS"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            onload="hideLoading()">
    </iframe>
</div>
{% endblock %}

{% block scripts %}
<script>
    function hideLoading() {
        document.getElementById('loading').style.display = 'none';
    }
    
    // Hide loading after max 5 seconds even if iframe doesn't load
    setTimeout(hideLoading, 5000);
</script>
{% endblock %}